{"ast":null,"code":"import { SOCKET_ADDRESS } from './Const';\nconst MODE_INSERT = \"insert\";\nconst MODE_NOTE = \"note\";\n\n/**\n * @typedef {Object} Cell\n * @property {number|null} value - The cell's value (e.g., 1-9 for Sudoku).\n * @property {number[]} notes - Array of possible values (notes).\n * @property {boolean|null} mod - Whether the cell is modifiable.\n */\n\n/**\n * @class\n */\nclass Cell {\n  constructor() {\n    this.value = null;\n    this.notes = new Set();\n    this.mod = null;\n  }\n  init(_value) {\n    this.value = _value;\n    this.mod = _value != 0 ? \"const\" : \"var\";\n  }\n  fill(_value) {\n    if (this.mod == \"const\") {\n      throw \"This cell value can not be modified\";\n    } else {\n      this.value = _value;\n    }\n  }\n  addNotes(number) {\n    this.notes.has(number) ? this.notes.delete(number) : this.notes.add(number);\n  }\n  rmNotes() {\n    this.notes.clear();\n  }\n}\n\n/**\n * @typedef {Object} Game\n * @property {string} level - The game difficulty level.\n * @property {Cell[][]} puzzle - 2D array of Cell objects (e.g., 9x9 grid).\n */\n\n/**\n * @class\n */\nclass Game {\n  constructor(level, puzzle) {\n    this.level = level;\n    this.puzzle = puzzle;\n  }\n}\nclass AbstractBoard {\n  constructor() {\n    this.game = null;\n    this.staticPuzzle = this.getStaticPuzzle();\n    this.row = null;\n    this.column = null;\n    this.msc = 10;\n    this.makeCanvas();\n  }\n  makeCanvas() {\n    console.log(\"makeCanvas\");\n    let length;\n    let canvas = document.getElementById('my-canvas');\n    let container = document.getElementById('my-canvas-container');\n    let parentHeight = container.getBoundingClientRect().height;\n    let parentWidth = container.getBoundingClientRect().width;\n    if (parentHeight >= parentWidth) {\n      length = parentWidth * 0.8;\n    } else {\n      length = parentHeight * 0.85;\n    }\n    console.log(this.msc);\n    canvas.width = length + this.msc * 3;\n    canvas.height = length + this.msc * 3;\n    this.length = length;\n    this.cellLength = length / 9;\n    this.noteCellLength = this.cellLength / 3;\n    this.cellStruct = [[1, 2, 3], [4, 5, 6], [7, 8, 9]];\n    this.canvas = canvas;\n    this.ctx = canvas.getContext('2d');\n    return;\n  }\n  makePuzzleStructure() {\n    let ret = [];\n    for (let i = 1; i <= 9; i++) {\n      let row = [];\n      for (let j = 1; j <= 9; j++) {\n        row.push(new Cell());\n      }\n      ret.push(row);\n    }\n    return ret;\n  }\n  initPuzzle(sudokuGrid, puzzle) {\n    for (let y = 0; y < 9; y++) {\n      for (let x = 0; x < 9; x++) {\n        puzzle[y][x].init(sudokuGrid[y][x]);\n      }\n    }\n  }\n  getStaticPuzzle() {\n    const sudokuGrid = [[5, 3, 4, 6, 7, 8, 9, 1, 2], [6, 7, 2, 1, 9, 5, 3, 4, 8], [1, 9, 8, 3, 4, 2, 5, 6, 7], [8, 5, 9, 7, 6, 1, 4, 2, 3], [4, 2, 6, 8, 5, 3, 7, 9, 1], [7, 1, 3, 9, 2, 4, 8, 5, 6], [9, 6, 1, 5, 3, 7, 2, 8, 4], [2, 8, 7, 4, 1, 9, 6, 3, 5], [3, 4, 5, 2, 8, 6, 1, 7, 9]];\n    let puzzle = this.makePuzzleStructure();\n    this.initPuzzle(sudokuGrid, puzzle);\n    return puzzle;\n  }\n  makeSudokuGrid(array) {\n    let ret = [];\n    for (let i = 0; array[i]; i++) {\n      const string = array[i];\n      let row = [];\n      for (let j = 0; string[j]; j++) {\n        row.push(parseInt(string[j]));\n      }\n      ret.push(row);\n    }\n    return ret;\n  }\n  makeDynamicPuzzle(array) {\n    let puzzle = this.makePuzzleStructure();\n    const sudokuGrid = this.makeSudokuGrid(array);\n    this.initPuzzle(sudokuGrid, puzzle);\n    return puzzle;\n  }\n  clearBoard() {\n    this.ctx.fillStyle = '#bfd2cc';\n    this.ctx.fillRect(10, 10, this.length, this.length);\n  }\n  drawNotes(notes, cellX, cellY) {\n    this.ctx.fillStyle = \"#4b6a66\";\n    /** @type {Set<number>} */\n    for (let r = 0; r <= 2; r++) {\n      for (let c = 0; c <= 2; c++) {\n        const search = this.cellStruct[r][c];\n        if (notes.has(search)) {\n          console.log(\"drawing note: \", search);\n          this.ctx.lineWidth = 1;\n          let startX = cellX + this.noteCellLength * c;\n          let startY = cellY + this.noteCellLength * r;\n          // at this point startX and startY do not include centering of the text only the starting point of a subcell for the note\n          const midX = startX + this.noteCellLength / 2;\n          const midY = startY + this.noteCellLength / 2;\n          this.ctx.font = `${this.noteCellLength * 0.8}px Roboto Slab`;\n          const textSize = this.ctx.measureText(search);\n          startX = midX - textSize.width / 2;\n          startY = midY + (textSize.actualBoundingBoxAscent - textSize.actualBoundingBoxDescent) / 2;\n          this.ctx.fillText(search, startX, startY);\n        }\n      }\n    }\n  }\n  drawSelectedCell() {\n    console.log(\"drawing selected cell\");\n    const x = this.column - 1;\n    const y = this.row - 1;\n    const cellX = this.msc + this.cellLength * x;\n    const cellY = this.msc + this.cellLength * y;\n    // make background light color\n    this.ctx.fillStyle = \"#bad6cf\";\n    this.ctx.fillRect(cellX, cellY, this.cellLength, this.cellLength);\n\n    // make border\n    this.ctx.strokeStyle = \"#859c95\";\n    this.ctx.lineWidth = 4;\n    this.drawCell(cellX, cellY);\n\n    // draw Number\n    this.drawInsideCell(x, y, cellX, cellY, this.game.puzzle);\n  }\n  drawCell(cellX, cellY) {\n    this.ctx.beginPath();\n    this.ctx.rect(cellX, cellY, this.cellLength, this.cellLength);\n    this.ctx.stroke();\n  }\n  drawInsideCell(x, y, cellX, cellY, puzzle) {\n    // console.log(\"draw inside cell()\")\n    const character = puzzle[y][x].value;\n    if (character === 0) {\n      if (puzzle[y][x].notes.size > 0) {\n        console.log(\"draw inside cell finds notes: \", puzzle[y][x].notes);\n        this.drawNotes(puzzle[y][x].notes, cellX, cellY);\n      }\n      return;\n    }\n    this.ctx.fillStyle = puzzle[y][x].mod == \"const\" ? '#343d39' : \"#4b6a66\";\n    const midx = cellX + this.cellLength / 2;\n    const midy = cellY + this.cellLength / 2;\n    this.ctx.font = `${this.cellLength * 0.8}px Roboto Slab`;\n    const textSize = this.ctx.measureText(character);\n    const startX = midx - textSize.width / 2;\n    const startY = midy + (textSize.actualBoundingBoxAscent - textSize.actualBoundingBoxDescent) / 2;\n    this.ctx.fillText(character, startX, startY);\n  }\n  drawRegions() {\n    this.ctx.lineWidth = 3;\n    this.ctx.strokeStyle = '#455c52';\n    this.ctx.beginPath();\n    const regionLength = this.length / 3;\n    for (let y = 0; y <= 3; y++) {\n      this.ctx.moveTo(this.msc, this.msc + y * regionLength);\n      this.ctx.lineTo(this.msc + this.length, this.msc + y * regionLength);\n      this.ctx.stroke();\n    }\n    for (let x = 0; x <= 3; x++) {\n      this.ctx.moveTo(this.msc + x * regionLength, this.msc);\n      this.ctx.lineTo(this.msc + x * regionLength, this.msc + this.length);\n      this.ctx.stroke();\n    }\n  }\n  /**\n   * @param {Cell[][]} puzzle - 2D array of Cell objects\n   */\n  drawPuzzle(puzzle) {\n    console.log(\"drawPuzzle()\");\n    this.ctx.fillStyle = '#bfd2cc';\n    this.ctx.fillRect(10, 10, this.length, this.length);\n    this.drawRegions();\n    this.ctx.lineWidth = 1;\n    // this.ctx.strokeStyle = '#343d39'\n\n    for (let y = 0; y < 9; y++) {\n      for (let x = 0; x < 9; x++) {\n        const cellX = x * this.cellLength + this.msc;\n        const cellY = y * this.cellLength + this.msc;\n        this.drawCell(cellX, cellY);\n        this.drawInsideCell(x, y, cellX, cellY, puzzle);\n      }\n    }\n  }\n  async fetchDynamicPuzzle(currentLevel) {\n    const url = \"http://\" + SOCKET_ADDRESS + '/fetchPuzzle/' + currentLevel;\n    console.log(url);\n    const arrayPuzzle = await fetch(url).then(res => {\n      return res.json();\n    }).then(data => {\n      return JSON.parse(data);\n    });\n    console.log(\"!!!\");\n    console.log(arrayPuzzle);\n    return this.makeDynamicPuzzle(arrayPuzzle);\n  }\n}\n\n/**\n * @typedef {Object} AbstractBoard\n * @property {function(): void} makeCanvas - Creates the canvas.\n * @property {Game|null} game - The current game instance.\n * @property {Cell[][]} staticPuzzle - Static puzzle grid.\n * @property {number|null} row - Selected row index.\n * @property {number|null} column - Selected column index.\n * @property {number} msc - Some constant (e.g., 10).\n */\n\n/**\n * @class\n */\nexport class Board extends AbstractBoard {\n  constructor() {\n    super();\n    console.log(\"Board constructor\");\n  }\n  drawStaticPuzzle() {\n    this.drawPuzzle(this.staticPuzzle);\n  }\n  drawDynamicPuzzle() {\n    console.log(\"drawDynamicPuzzle: \", currentLevel);\n    this.drawPuzzle(this.game.puzzle);\n    if (this.column && this.row && this.column >= 1 && this.column <= 9 && this.row >= 1 && this.row <= 9) this.drawSelectedCell();\n  }\n  async fetchAndDrawDynamicPuzzle(currentLevel) {\n    if (!this.game || this.game.level != currentLevel) {\n      console.log(`new game ${!this.game ? \"no active game\" : \"different level\"}`);\n      const puzzle = await this.fetchDynamicPuzzle(currentLevel);\n      this.game = new Game(currentLevel, puzzle);\n    }\n    this.drawDynamicPuzzle();\n  }\n  updateCellValue(y, x, value) {\n    try {\n      this.game.puzzle[x][y].fill(value);\n    } catch (err) {\n      console.log(\"You tried to modify a cell from the initial puzzle: \", err);\n    }\n    console.log(\"cell new value: \", this.game.puzzle[x][y].value);\n    this.drawPuzzle(this.game.puzzle);\n  }\n  updateCellNote(y, x, value) {\n    this.game.puzzle[x][y].addNotes(value);\n    console.log(\"added note at pos x: \", x, \", y: \", y);\n    console.log(\"new notes: \", this.game.puzzle[x][y].notes);\n    this.drawDynamicPuzzle();\n  }\n  updateSelection(canvasX, canvasY) {\n    canvasX -= this.msc;\n    canvasY -= this.msc;\n    console.log(\"updateSelection called\");\n    const posX = canvasX / this.cellLength;\n    const posY = canvasY / this.cellLength;\n    console.log(\"posX: \", posX);\n    console.log(\"posY: \", posY);\n    const newcolumn = Math.ceil(posX);\n    const newrow = Math.ceil(posY);\n    if (newcolumn < 1 || newrow < 1 || newcolumn > 9 || newrow > 9 || this.column && this.row && this.column == newcolumn && this.row == newrow) {\n      this.column = null;\n      this.newrow = null;\n      console.log(\"unselected cell\");\n      return null;\n    }\n    this.column = newcolumn;\n    this.row = newrow;\n    console.log(`selected row: ${this.row}, col: ${this.column}`);\n    return {\n      \"x\": this.column - 1,\n      \"y\": this.row - 1\n    };\n  }\n  draw(activeGame, currentLevel) {\n    if (!activeGame) {\n      console.log(\"drawing static puzzle\");\n      this.drawStaticPuzzle();\n    } else {\n      console.log(\"drawing dynamic puzzle level \", currentLevel);\n      this.drawDynamicPuzzle(currentLevel);\n    }\n  }\n  noEmptyCell() {\n    const puzzle = this.game.puzzle;\n    if (!puzzle) return false;\n    for (let y = 0; y < 9; y++) for (let x = 0; x < 9; x++) if (puzzle[y][x].value == 0) return false;\n    return true;\n  }\n  giveUp() {\n    this.game = null;\n  }\n  resize() {\n    this.makeCanvas();\n  }\n}","map":{"version":3,"names":["SOCKET_ADDRESS","MODE_INSERT","MODE_NOTE","Cell","constructor","value","notes","Set","mod","init","_value","fill","addNotes","number","has","delete","add","rmNotes","clear","Game","level","puzzle","AbstractBoard","game","staticPuzzle","getStaticPuzzle","row","column","msc","makeCanvas","console","log","length","canvas","document","getElementById","container","parentHeight","getBoundingClientRect","height","parentWidth","width","cellLength","noteCellLength","cellStruct","ctx","getContext","makePuzzleStructure","ret","i","j","push","initPuzzle","sudokuGrid","y","x","makeSudokuGrid","array","string","parseInt","makeDynamicPuzzle","clearBoard","fillStyle","fillRect","drawNotes","cellX","cellY","r","c","search","lineWidth","startX","startY","midX","midY","font","textSize","measureText","actualBoundingBoxAscent","actualBoundingBoxDescent","fillText","drawSelectedCell","strokeStyle","drawCell","drawInsideCell","beginPath","rect","stroke","character","size","midx","midy","drawRegions","regionLength","moveTo","lineTo","drawPuzzle","fetchDynamicPuzzle","currentLevel","url","arrayPuzzle","fetch","then","res","json","data","JSON","parse","Board","drawStaticPuzzle","drawDynamicPuzzle","fetchAndDrawDynamicPuzzle","updateCellValue","err","updateCellNote","updateSelection","canvasX","canvasY","posX","posY","newcolumn","Math","ceil","newrow","draw","activeGame","noEmptyCell","giveUp","resize"],"sources":["/home/henri/Projects/WebSudoku/react-app/src/Board.js"],"sourcesContent":["import { SOCKET_ADDRESS } from './Const';\n\nconst MODE_INSERT = \"insert\"\nconst MODE_NOTE = \"note\"\n\n/**\n * @typedef {Object} Cell\n * @property {number|null} value - The cell's value (e.g., 1-9 for Sudoku).\n * @property {number[]} notes - Array of possible values (notes).\n * @property {boolean|null} mod - Whether the cell is modifiable.\n */\n\n/**\n * @class\n */\nclass Cell {\n\tconstructor() {\n\t\tthis.value = null\n\t\tthis.notes = new Set()\n\t\tthis.mod = null;\n\t}\n\tinit(_value) {\n\t\tthis.value = _value\n\t\tthis.mod = _value != 0 ? \"const\" : \"var\"\n\t}\n\tfill(_value) {\n\t\tif (this.mod == \"const\") {\n\t\t\tthrow \"This cell value can not be modified\"\n\t\t}\n\t\telse {\n\t\t\tthis.value = _value\n\t\t}\n\t}\n\taddNotes(number) {\n\t\tthis.notes.has(number) ? this.notes.delete(number) : this.notes.add(number)\n\t}\n\trmNotes() {\n\t\tthis.notes.clear()\n\t}\n}\n\n/**\n * @typedef {Object} Game\n * @property {string} level - The game difficulty level.\n * @property {Cell[][]} puzzle - 2D array of Cell objects (e.g., 9x9 grid).\n */\n\n/**\n * @class\n */\nclass Game {\n\tconstructor(level, puzzle) {\n\t\tthis.level = level\n\t\tthis.puzzle = puzzle\n\t}\n}\n\nclass AbstractBoard {\n\tconstructor() {\n\t\tthis.game = null\n\t\tthis.staticPuzzle = this.getStaticPuzzle()\n\t\tthis.row = null\n\t\tthis.column = null\n\t\tthis.msc = 10\n\t\tthis.makeCanvas()\n\t}\n\tmakeCanvas() {\n\t\tconsole.log(\"makeCanvas\")\n\t\tlet length;\n\n\t\tlet canvas = document.getElementById('my-canvas')\n\t\tlet container = document.getElementById('my-canvas-container')\n\t\tlet parentHeight = container.getBoundingClientRect().height\n\t\tlet parentWidth = container.getBoundingClientRect().width\n\n\t\tif (parentHeight >= parentWidth) {\n\t\t\tlength = parentWidth * 0.8\n\t\t}\n\t\telse {\n\t\t\tlength = parentHeight * 0.85\n\t\t}\n\t\tconsole.log(this.msc)\n\t\tcanvas.width = length + this.msc * 3\n\t\tcanvas.height = length + this.msc * 3\n\n\t\tthis.length = length\n\t\tthis.cellLength = length / 9\n\t\tthis.noteCellLength = this.cellLength / 3\n\t\tthis.cellStruct = [\n\t\t\t[1, 2, 3],\n\t\t\t[4, 5, 6],\n\t\t\t[7, 8, 9]\n\t\t]\n\t\tthis.canvas = canvas\n\t\tthis.ctx = canvas.getContext('2d')\n\t\treturn\n\t}\n\tmakePuzzleStructure() {\n\t\tlet ret = []\n\t\tfor (let i = 1; i <= 9; i++) {\n\t\t\tlet row = []\n\t\t\tfor (let j = 1; j <= 9; j++) {\n\t\t\t\trow.push(new Cell())\n\t\t\t}\n\t\t\tret.push(row)\n\t\t}\n\t\treturn ret;\n\t}\n\tinitPuzzle(sudokuGrid, puzzle) {\n\t\tfor (let y = 0; y < 9; y++) {\n\t\t\tfor (let x = 0; x < 9; x++) {\n\t\t\t\tpuzzle[y][x].init(sudokuGrid[y][x])\n\t\t\t}\n\t\t}\n\t}\n\tgetStaticPuzzle() {\n\t\tconst sudokuGrid = [\n\t\t\t[5, 3, 4, 6, 7, 8, 9, 1, 2],\n\t\t\t[6, 7, 2, 1, 9, 5, 3, 4, 8],\n\t\t\t[1, 9, 8, 3, 4, 2, 5, 6, 7],\n\t\t\t[8, 5, 9, 7, 6, 1, 4, 2, 3],\n\t\t\t[4, 2, 6, 8, 5, 3, 7, 9, 1],\n\t\t\t[7, 1, 3, 9, 2, 4, 8, 5, 6],\n\t\t\t[9, 6, 1, 5, 3, 7, 2, 8, 4],\n\t\t\t[2, 8, 7, 4, 1, 9, 6, 3, 5],\n\t\t\t[3, 4, 5, 2, 8, 6, 1, 7, 9]\n\t\t];\n\t\tlet puzzle = this.makePuzzleStructure()\n\t\tthis.initPuzzle(sudokuGrid, puzzle)\n\t\treturn puzzle\n\t}\n\tmakeSudokuGrid(array) {\n\t\tlet ret = []\n\t\tfor (let i = 0; array[i]; i++) {\n\t\t\tconst string = array[i]\n\t\t\tlet row = []\n\t\t\tfor (let j = 0; string[j]; j++) {\n\t\t\t\trow.push(parseInt(string[j]))\n\t\t\t}\n\t\t\tret.push(row)\n\t\t}\n\t\treturn ret\n\t}\n\tmakeDynamicPuzzle(array) {\n\t\tlet puzzle = this.makePuzzleStructure()\n\t\tconst sudokuGrid = this.makeSudokuGrid(array)\n\t\tthis.initPuzzle(sudokuGrid, puzzle)\n\t\treturn puzzle\n\t}\n\tclearBoard() {\n\t\tthis.ctx.fillStyle = '#bfd2cc'\n\t\tthis.ctx.fillRect(10, 10, this.length, this.length)\n\t}\n\tdrawNotes(notes, cellX, cellY) {\n\t\tthis.ctx.fillStyle = \"#4b6a66\"\n\t\t/** @type {Set<number>} */\n\t\tfor (let r = 0; r <= 2; r++) {\n\t\t\tfor (let c = 0; c <= 2; c++) {\n\t\t\t\tconst search = this.cellStruct[r][c]\n\t\t\t\tif (notes.has(search)) {\n\t\t\t\t\tconsole.log(\"drawing note: \", search)\n\t\t\t\t\tthis.ctx.lineWidth = 1\n\t\t\t\t\tlet startX = cellX + this.noteCellLength * c\n\t\t\t\t\tlet startY = cellY + this.noteCellLength * r\n\t\t\t\t\t// at this point startX and startY do not include centering of the text only the starting point of a subcell for the note\n\t\t\t\t\tconst midX = startX + this.noteCellLength / 2\n\t\t\t\t\tconst midY = startY + this.noteCellLength / 2\n\t\t\t\t\tthis.ctx.font = `${this.noteCellLength * 0.8}px Roboto Slab`\n\t\t\t\t\tconst textSize = this.ctx.measureText(search)\n\t\t\t\t\tstartX = midX - textSize.width / 2\n\t\t\t\t\tstartY = midY + (textSize.actualBoundingBoxAscent - textSize.actualBoundingBoxDescent) / 2\n\t\t\t\t\tthis.ctx.fillText(search, startX, startY)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tdrawSelectedCell() {\n\t\tconsole.log(\"drawing selected cell\")\n\t\tconst x = this.column - 1\n\t\tconst y = this.row - 1\n\t\tconst cellX = this.msc + this.cellLength * x\n\t\tconst cellY = this.msc + this.cellLength * y\n\t\t// make background light color\n\t\tthis.ctx.fillStyle = \"#bad6cf\"\n\t\tthis.ctx.fillRect(cellX, cellY, this.cellLength, this.cellLength)\n\n\t\t// make border\n\t\tthis.ctx.strokeStyle = \"#859c95\"\n\t\tthis.ctx.lineWidth = 4\n\t\tthis.drawCell(cellX, cellY)\n\n\t\t// draw Number\n\t\tthis.drawInsideCell(x, y, cellX, cellY, this.game.puzzle)\n\t}\n\tdrawCell(cellX, cellY) {\n\t\tthis.ctx.beginPath()\n\t\tthis.ctx.rect(cellX, cellY, this.cellLength, this.cellLength)\n\t\tthis.ctx.stroke()\n\t}\n\tdrawInsideCell(x, y, cellX, cellY, puzzle) {\n\t\t// console.log(\"draw inside cell()\")\n\t\tconst character = puzzle[y][x].value\n\t\tif (character === 0) {\n\t\t\tif (puzzle[y][x].notes.size > 0) {\n\t\t\t\tconsole.log(\"draw inside cell finds notes: \", puzzle[y][x].notes)\n\t\t\t\tthis.drawNotes(puzzle[y][x].notes, cellX, cellY)\n\t\t\t}\n\t\t\treturn\n\t\t}\n\t\tthis.ctx.fillStyle = puzzle[y][x].mod == \"const\" ? '#343d39' : \"#4b6a66\"\n\t\tconst midx = cellX + (this.cellLength / 2)\n\t\tconst midy = cellY + (this.cellLength / 2)\n\t\tthis.ctx.font = `${this.cellLength * 0.8}px Roboto Slab`\n\t\tconst textSize = this.ctx.measureText(character)\n\t\tconst startX = midx - textSize.width / 2;\n\t\tconst startY = midy + (textSize.actualBoundingBoxAscent - textSize.actualBoundingBoxDescent) / 2\n\t\tthis.ctx.fillText(character, startX, startY)\n\n\t}\n\tdrawRegions() {\n\t\tthis.ctx.lineWidth = 3\n\t\tthis.ctx.strokeStyle = '#455c52'\n\t\tthis.ctx.beginPath()\n\t\tconst regionLength = this.length / 3\n\t\tfor (let y = 0; y <= 3; y++) {\n\t\t\tthis.ctx.moveTo(this.msc, this.msc + y * regionLength)\n\t\t\tthis.ctx.lineTo(this.msc + this.length, this.msc + y * regionLength)\n\t\t\tthis.ctx.stroke()\n\t\t}\n\t\tfor (let x = 0; x <= 3; x++) {\n\t\t\tthis.ctx.moveTo(this.msc + x * regionLength, this.msc)\n\t\t\tthis.ctx.lineTo(this.msc + x * regionLength, this.msc + this.length)\n\t\t\tthis.ctx.stroke()\n\t\t}\n\t}\n\t/**\n\t * @param {Cell[][]} puzzle - 2D array of Cell objects\n\t */\n\tdrawPuzzle(puzzle) {\n\t\tconsole.log(\"drawPuzzle()\")\n\t\tthis.ctx.fillStyle = '#bfd2cc'\n\t\tthis.ctx.fillRect(10, 10, this.length, this.length)\n\n\t\tthis.drawRegions()\n\t\tthis.ctx.lineWidth = 1\n\t\t// this.ctx.strokeStyle = '#343d39'\n\n\t\tfor (let y = 0; y < 9; y++) {\n\t\t\tfor (let x = 0; x < 9; x++) {\n\t\t\t\tconst cellX = x * this.cellLength + this.msc\n\t\t\t\tconst cellY = y * this.cellLength + this.msc\n\t\t\t\tthis.drawCell(cellX, cellY)\n\t\t\t\tthis.drawInsideCell(x, y, cellX, cellY, puzzle)\n\t\t\t}\n\t\t}\n\t}\n\tasync fetchDynamicPuzzle(currentLevel) {\n\t\tconst url = \"http://\" + SOCKET_ADDRESS + '/fetchPuzzle/' + currentLevel\n\t\tconsole.log(url)\n\t\tconst arrayPuzzle = await fetch(url).then((res) => {\n\t\t\treturn res.json()\n\t\t}\n\t\t).then((data) => {\n\t\t\treturn JSON.parse(data)\n\t\t})\n\t\tconsole.log(\"!!!\")\n\t\tconsole.log(arrayPuzzle)\n\t\treturn this.makeDynamicPuzzle(arrayPuzzle)\n\t}\n}\n\n/**\n * @typedef {Object} AbstractBoard\n * @property {function(): void} makeCanvas - Creates the canvas.\n * @property {Game|null} game - The current game instance.\n * @property {Cell[][]} staticPuzzle - Static puzzle grid.\n * @property {number|null} row - Selected row index.\n * @property {number|null} column - Selected column index.\n * @property {number} msc - Some constant (e.g., 10).\n */\n\n/**\n * @class\n */\nexport class Board extends AbstractBoard {\n\tconstructor() {\n\t\tsuper()\n\t\tconsole.log(\"Board constructor\")\n\t}\n\tdrawStaticPuzzle() {\n\t\tthis.drawPuzzle(this.staticPuzzle)\n\t}\n\tdrawDynamicPuzzle() {\n\t\tconsole.log(\"drawDynamicPuzzle: \", currentLevel)\n\t\tthis.drawPuzzle(this.game.puzzle)\n\t\tif (this.column && this.row && this.column >= 1 && this.column <= 9 && this.row >= 1 && this.row <= 9)\n\t\t\tthis.drawSelectedCell()\n\t}\n\tasync fetchAndDrawDynamicPuzzle(currentLevel) {\n\t\tif (!this.game || this.game.level != currentLevel) {\n\t\t\tconsole.log(`new game ${!this.game ? \"no active game\" : \"different level\"}`)\n\t\t\tconst puzzle = await this.fetchDynamicPuzzle(currentLevel);\n\t\t\tthis.game = new Game(currentLevel, puzzle)\n\t\t}\n\t\tthis.drawDynamicPuzzle()\n\t}\n\tupdateCellValue(y, x, value) {\n\t\ttry {\n\t\t\tthis.game.puzzle[x][y].fill(value);\n\t\t}\n\t\tcatch (err) {\n\t\t\tconsole.log(\"You tried to modify a cell from the initial puzzle: \", err)\n\t\t}\n\t\tconsole.log(\"cell new value: \", this.game.puzzle[x][y].value)\n\t\tthis.drawPuzzle(this.game.puzzle)\n\t}\n\tupdateCellNote(y, x, value) {\n\t\tthis.game.puzzle[x][y].addNotes(value)\n\t\tconsole.log(\"added note at pos x: \", x, \", y: \", y)\n\t\tconsole.log(\"new notes: \", this.game.puzzle[x][y].notes)\n\t\tthis.drawDynamicPuzzle()\n\t}\n\tupdateSelection(canvasX, canvasY) {\n\t\tcanvasX -= this.msc\n\t\tcanvasY -= this.msc\n\t\tconsole.log(\"updateSelection called\")\n\t\tconst posX = canvasX / this.cellLength\n\t\tconst posY = canvasY / this.cellLength\n\t\tconsole.log(\"posX: \", posX)\n\t\tconsole.log(\"posY: \", posY)\n\t\tconst newcolumn = Math.ceil(posX)\n\t\tconst newrow = Math.ceil(posY)\n\n\t\tif ((newcolumn < 1 || newrow < 1 || newcolumn > 9 || newrow > 9)\n\t\t\t|| (this.column && this.row && this.column == newcolumn && this.row == newrow)) {\n\t\t\tthis.column = null;\n\t\t\tthis.newrow = null;\n\t\t\tconsole.log(\"unselected cell\")\n\t\t\treturn null\n\t\t}\n\t\tthis.column = newcolumn\n\t\tthis.row = newrow\n\t\tconsole.log(`selected row: ${this.row}, col: ${this.column}`)\n\t\treturn { \"x\": this.column - 1, \"y\": this.row - 1 }\n\t}\n\tdraw(activeGame, currentLevel) {\n\t\tif (!activeGame) {\n\t\t\tconsole.log(\"drawing static puzzle\")\n\t\t\tthis.drawStaticPuzzle()\n\t\t}\n\t\telse {\n\t\t\tconsole.log(\"drawing dynamic puzzle level \", currentLevel)\n\t\t\tthis.drawDynamicPuzzle(currentLevel)\n\t\t}\n\t}\n\tnoEmptyCell() {\n\t\tconst puzzle = this.game.puzzle\n\t\tif (!puzzle)\n\t\t\treturn false\n\t\tfor (let y = 0; y < 9; y++)\n\t\t\tfor (let x = 0; x < 9; x++)\n\t\t\t\tif (puzzle[y][x].value == 0)\n\t\t\t\t\treturn false\n\t\treturn true;\n\t}\n\tgiveUp() {\n\t\tthis.game = null\n\t}\n\tresize() {\n\t\tthis.makeCanvas()\n\t}\n}\n\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}